<div class="pb-5" style="background-image: url('<%= image_path 'wallpaper.png', crop: :fill%> ');">
  <div>
    <% if user_signed_in? && current_user == @lesson.user %>
      <%= link_to "Delete Lesson",
                lesson_path(@lesson),
                class: "btn btn-danger",
                data: { turbo_method: :delete, turbo_confirm: "Are you sure you want to delete this lesson?" }
                 %>
    <% end %>
  </div>
  <div>
    <%= link_to 'Back', lessons_path, class: 'm-4 btn btn-secondary rounded-4 text-white' %>
  </div>
  <div class="container d-flex justify-content-center gap-5">
    <div class="card-about-trainer">
      <div class="img">
        <% if @trainer.photo.attached? %>
          <%= cl_image_tag @lesson.photos.first.key, gravity: "face", height: 300, width: 300, crop: :fill %>
        <% else %>
          <%= image_tag 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTPQDYau3Hs4-xw1i8jVSUY4BlF4FLmg8lQqg&usqp=CAU' %>
        <% end %>
      </div>
      <span> <%= @lesson.title %></span>
      <p class="info fs-5">Teacher: <%= @trainer.first_name %></p>
      <p class="info"><%= @lesson.description %></p>
      <p class="info">Price: $<%= number_with_delimiter(@lesson.price) %></p>
      <p class="info">Duration: <%= @lesson.duration %> minutes</p>
      <button> <%= link_to "Book Now!", new_lesson_booking_path(@lesson), class: "text-black"%> </button>
    </div>
    <div class="d-flex flex-column col-4 gap-5" style="height: 600px;">
      <div class="border bg-black rounded-4 p-3">
        <p class="text-white">Address: <%= @lesson.address %> 📍</p>
        <p class="text-white">
          <%= link_to "Directions ↗",
      "https://www.google.com/maps/search/?api=1&query=#{CGI.escape(@lesson.address)}",
      target: "_blank",
      rel: "noopener",
      class: "text-decoration-none text-white" %>
        </p>
      </div>
      <div class="col-12">
        <div class="map-trainer-container">
          <div class="map-trainer-view"
        data-controller="map"
        data-map-markers-value="<%= @markers.to_json %>"
        data-map-api-key-value="<%= ENV['MAPBOX_API_KEY'] %>">
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
